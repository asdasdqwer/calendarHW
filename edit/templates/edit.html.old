<!DOCTYPE html>

<html>
    <head>
        <meta charset="utf-8">
        {% load static %}
        <link href="{% static 'edit.css' %}" rel="stylesheet">
        <meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="Content-Security-Policy" content="script-src 'self';">
    </head>
    
    <body>
        <form method="POST" action="./">{% csrf_token %}
            <div id="titleDiv">
                <input type="text" name="title" id="title" placeholder="Titel der Aufgabe (optional)" value="{{ title }}" required>
            </div>
            
            <div id="rest">
                <div id="descriptions">
                    <p>Datum: </p>
                    <p>Fach: </p>
                    <p>Typ: </p>
                </div>
                <div id="inputs">
                    <input type="date" id="inputDate" name="inputDate" required>
                    
                    
                    <select id="subject" name="subject" required>
                        {% for subject in subjects %}
                            <option value="{{ subject }}">{{ subject }}</option>
                        {% endfor %}
                    </select>
                    
                    <select id="type" name="taskType" value="{{ taskType }}"  required>
                        <option value="Hausaufgabe" id="ha">Hausaufgabe</option>
                        <option value="Klausur (mit Test)" id="klausurMT">Klausur (mit Test)</option>
                        <option value="Klausur (ohne Test)" id="klausurOT">Klausur (ohne Test)</option>
                        <option value="Test" id="test">Test</option>
                    </select>
                </div>
            </div>
            <hr>
            
            <textarea id="task" name="description" placeholder="Beschreibung der Aufgabe / Themen der Klausur" required>{{ description }}</textarea>
            <button id="submit" type="submit">Senden</button>
        </form>
        
        <script>
            var inputDate = document.getElementById("inputDate");
            if ("{{ finishDate }}" != ""){
                inputDate.valueAsDate = new Date("{{ finishDate }}");
            }
            else {
                inputDate.valueAsDate = new Date("{{ finishDate }}");
            }
            
            var taskType = "{{ taskType }}";
            var dict = {
                "Hausaufgabe": "ha",
                "Klausur (mit Test)": "klausurMT",
                "Klausur (ohne Test)": "klausurOT",
                "Test": "test"
            };
            
            option = document.getElementById(dict[taskType]);
            option.selected = true;
        </script>

        {% load static %}
        <script src="{% static 'edit.js' %}">
        </script>
    </body>
</html>
